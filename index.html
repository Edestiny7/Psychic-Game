<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <!--<link rel="stylesheet" href="./assets/css/reset.css">-->
    <script type="text/javascript" src="./assets/javascript/game.js"></script>
    <title>The Psychic Game</title>
</head>

<body>
    <h1>The Psychic Game</h1>
    <div>
        <p id="directions-text">Guess what letter I am thinking of</p>
        <p id="wins-text"></p>
        <p id="losses-text"></p>
        <p id="guessesRemaining-text"></p>
        <p id="userSelection-text"></p>
    </div>

     <script type="text/javascript">

        // Psychic letter selection from the js function
        let psychicChoice = random_letter(psychicSelection);
        let guessesRemaining = 9;
        let userSelection = [];
        let psychicScore = 0;
        let userScore = 0;

        //Variable references
        let winsText = document.getElementById("wins-text");
        let lossesText = document.getElementById("losses-text");
        let guessesRemainingText = document.getElementById("guessesRemaining-text");
        let userSelectionText = document.getElementById("userSelection-text");

        //Runs when user enters guess
        reset();
        document.onkeyup = function (event) {

            // User guess
            let userChoice = event.key.toLowerCase();

            console.log("psychicChoice2: " + psychicChoice);

            if (guessesRemaining != 0) {
                guessesRemaining = (guessesRemaining - 1);
                userSelection.push(userChoice);
                if (userChoice === psychicChoice) {
                    userScore++;
                    guessesRemaining = 0;
                    reset();
                } else if (guessesRemaining==0){
                    psychicScore++
                    reset();
                }
            }
            console.log("Guesses Remaining: " + guessesRemaining);
            console.log("Join: " + userSelection.join());

            winsText.textContent = "Wins: " + userScore;
            lossesText.textContent = "Losses: " + psychicScore;
            guessesRemainingText.textContent = "Guesses remaining: " + guessesRemaining;
            userSelectionText.textContent = "Your guesses so far: " + userSelection.join();
        }
    </script> 
</body>

</html>